{"ast":null,"code":"var _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { client } from \"../../../index\";\n// eslint-disable-next-line\nimport { CREATE_USER, LOGIN_USER, GEN_OTP } from \"../../../graphql/user\";\n// eslint-disable-next-line\nimport { setUsers, setLoading, setErrors, setOTP } from \"../../features/user/userSlice\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useNavigate } from \"react-router-dom\";\nexport function useCreateUser() {\n  _s();\n  const Navigate = useNavigate();\n  const dispatch = useDispatch();\n  const userSelector = useSelector(state => state.user);\n  const createUser = async data => {\n    try {\n      var _res$data$createUser, _res$data$createUser4;\n      dispatch(setLoading(true));\n      const res = await client.mutate({\n        mutation: CREATE_USER,\n        variables: {\n          createInput: data\n        }\n      });\n      if ((_res$data$createUser = res.data.createUser) !== null && _res$data$createUser !== void 0 && _res$data$createUser.token) {\n        var _res$data$createUser2, _res$data$createUser3;\n        dispatch(setLoading(false));\n        localStorage.setItem(\"token\", (_res$data$createUser2 = res.data.createUser) === null || _res$data$createUser2 === void 0 ? void 0 : _res$data$createUser2.token);\n        toast.success((_res$data$createUser3 = res.data.createUser) === null || _res$data$createUser3 === void 0 ? void 0 : _res$data$createUser3.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n        Navigate(\"/\");\n      }\n      if ((_res$data$createUser4 = res.data.createUser) !== null && _res$data$createUser4 !== void 0 && _res$data$createUser4.args) {\n        var _res$data$createUser5, _res$data$createUser6;\n        dispatch(setLoading(false));\n        dispatch(setErrors((_res$data$createUser5 = res.data.createUser) === null || _res$data$createUser5 === void 0 ? void 0 : _res$data$createUser5.args));\n        toast.error((_res$data$createUser6 = res.data.createUser) === null || _res$data$createUser6 === void 0 ? void 0 : _res$data$createUser6.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n    }\n  };\n  return {\n    createUser,\n    userSelector\n  };\n}\n_s(useCreateUser, \"LBEGFPdjeLpohUj2LvnvCtLlqao=\", false, function () {\n  return [useNavigate, useDispatch, useSelector];\n});\nexport function useSendOtp() {\n  _s2();\n  const dispatch = useDispatch();\n  const sendOtp = async number => {\n    try {\n      var _res$data, _res$data3;\n      dispatch(setLoading(true));\n      const res = await client.mutate({\n        mutation: GEN_OTP,\n        variables: {\n          mobilenumber: number\n        }\n      });\n      dispatch(setLoading(false));\n      if (res !== null && res !== void 0 && (_res$data = res.data) !== null && _res$data !== void 0 && _res$data.genOtp.otp) {\n        var _res$data2;\n        dispatch(setOTP(res === null || res === void 0 ? void 0 : (_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.genOtp.otp));\n      }\n      if (res !== null && res !== void 0 && (_res$data3 = res.data) !== null && _res$data3 !== void 0 && _res$data3.genOtp.args) {\n        var _res$data4, _res$data$genOtp;\n        dispatch(setErrors(res === null || res === void 0 ? void 0 : (_res$data4 = res.data) === null || _res$data4 === void 0 ? void 0 : _res$data4.genOtp.message));\n        toast.error(((_res$data$genOtp = res.data.genOtp) === null || _res$data$genOtp === void 0 ? void 0 : _res$data$genOtp.args) + \" does not exist\", {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n      toast.error(error.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  };\n  return {\n    sendOtp\n  };\n}\n_s2(useSendOtp, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});\nexport function useLoginUser() {\n  _s3();\n  const dispatch = useDispatch();\n  const login = async data => {\n    try {\n      dispatch(setLoading(true));\n      const res = await client.mutate({\n        mutation: LOGIN_USER,\n        variables: data\n      });\n      dispatch(setLoading(false));\n      if (res.data.loginUser.args == \"mobile number\") {\n        toast.error(\"User does not exist\", {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n      if (res.data.loginUser.args == \"password\") {\n        toast.error(\"Incorrect password\", {\n          position: toast.POSITION.TOP_RIGHT\n        });\n      }\n      if (res.data.loginUser.token) {\n        var _res$data$createUser7, _res$data$createUser8;\n        localStorage.setItem(\"token\", (_res$data$createUser7 = res.data.createUser) === null || _res$data$createUser7 === void 0 ? void 0 : _res$data$createUser7.token);\n        toast.success((_res$data$createUser8 = res.data.createUser) === null || _res$data$createUser8 === void 0 ? void 0 : _res$data$createUser8.message, {\n          position: toast.POSITION.TOP_RIGHT\n        });\n        Navigate(\"/\");\n      }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n      toast.error(error.message, {\n        position: toast.POSITION.TOP_RIGHT\n      });\n    }\n  };\n}\n_s3(useLoginUser, \"rgTLoBID190wEKCp9+G8W6F7A5M=\", false, function () {\n  return [useDispatch];\n});","map":{"version":3,"names":["useSelector","useDispatch","client","CREATE_USER","LOGIN_USER","GEN_OTP","setUsers","setLoading","setErrors","setOTP","toast","useNavigate","useCreateUser","_s","Navigate","dispatch","userSelector","state","user","createUser","data","_res$data$createUser","_res$data$createUser4","res","mutate","mutation","variables","createInput","token","_res$data$createUser2","_res$data$createUser3","localStorage","setItem","success","message","position","POSITION","TOP_RIGHT","args","_res$data$createUser5","_res$data$createUser6","error","useSendOtp","_s2","sendOtp","number","_res$data","_res$data3","mobilenumber","genOtp","otp","_res$data2","_res$data4","_res$data$genOtp","useLoginUser","_s3","login","loginUser","_res$data$createUser7","_res$data$createUser8"],"sources":["/Users/vanshamaggarwal/Documents/GitHub/QueryOverflow/frontend/src/redux/features/user/userActions.js"],"sourcesContent":["import { useSelector, useDispatch } from \"react-redux\";\nimport { client } from \"../../../index\";\n// eslint-disable-next-line\nimport { CREATE_USER, LOGIN_USER, GEN_OTP } from \"../../../graphql/user\";\n// eslint-disable-next-line\nimport {\n  setUsers,\n  setLoading,\n  setErrors,\n  setOTP,\n} from \"../../features/user/userSlice\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport { useNavigate } from \"react-router-dom\";\nexport function useCreateUser() {\n  const Navigate = useNavigate();\n  const dispatch = useDispatch();\n  const userSelector = useSelector((state) => state.user);\n  const createUser = async (data) => {\n    try {\n      dispatch(setLoading(true));\n      const res = await client.mutate({\n        mutation: CREATE_USER,\n        variables: {\n          createInput: data,\n        },\n      });\n\n      if (res.data.createUser?.token) {\n        dispatch(setLoading(false));\n        localStorage.setItem(\"token\", res.data.createUser?.token);\n        toast.success(res.data.createUser?.message, {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n        Navigate(\"/\");\n      }\n\n      if (res.data.createUser?.args) {\n        dispatch(setLoading(false));\n        dispatch(setErrors(res.data.createUser?.args));\n        toast.error(res.data.createUser?.message, {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n      }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n    }\n  };\n  return {\n    createUser,\n    userSelector,\n  };\n}\n\nexport function useSendOtp() {\n  const dispatch = useDispatch();\n  const sendOtp = async (number) => {\n    try {\n      dispatch(setLoading(true));\n      const res = await client.mutate({\n        mutation: GEN_OTP,\n        variables: {\n          mobilenumber: number,\n        },\n      });\n\n      dispatch(setLoading(false));\n      if (res?.data?.genOtp.otp) {\n        dispatch(setOTP(res?.data?.genOtp.otp));\n      }\n\n      if (res?.data?.genOtp.args) {\n        dispatch(setErrors(res?.data?.genOtp.message));\n        toast.error(res.data.genOtp?.args + \" does not exist\", {\n          position: toast.POSITION.TOP_RIGHT,\n        });\n      }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n      toast.error(error.message, {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\n  return {\n    sendOtp,\n  };\n}\n\nexport function useLoginUser() {\n  const dispatch = useDispatch();\n  const login = async (data) => {\n    try {\n        dispatch(setLoading(true));\n        const res = await client.mutate({\n            mutation : LOGIN_USER,\n            variables : data\n        });\n        dispatch(setLoading(false));\n\n        if(res.data.loginUser.args == \"mobile number\")\n        {\n            toast.error(\"User does not exist\", {\n                position: toast.POSITION.TOP_RIGHT,\n              });\n        }\n\n        if(res.data.loginUser.args == \"password\")\n        {\n            toast.error(\"Incorrect password\", {\n                position: toast.POSITION.TOP_RIGHT,\n              });\n        }\n\n        if(res.data.loginUser.token)\n        {\n            localStorage.setItem(\"token\", res.data.createUser?.token);\n            toast.success(res.data.createUser?.message, {\n              position: toast.POSITION.TOP_RIGHT,\n            });\n            Navigate(\"/\");\n        }\n    } catch (error) {\n      dispatch(setLoading(false));\n      dispatch(setErrors(error.message));\n      toast.error(error.message, {\n        position: toast.POSITION.TOP_RIGHT,\n      });\n    }\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}